# Use Cases для таск-трекера

## UC01: Создание новой задачи

**Акторы:** Пользователь  
**Триггер:** Пользователь нажимает кнопку "Создать задачу" на экране планировщика  
**Предусловия:** Пользователь авторизован в приложении  
**Результат:** Задача создана и отображается в системе

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | | Система отображает экран создания задачи с полями: "Название", "Описание" (опционально), "Дата окончания" |
| 2 | Пользователь заполняет поля | |
| 3 | Пользователь нажимает "Сохранить" | |
| 4 | | Система валидирует введенные данные |
| 5 | | Система сохраняет задачу |
| 6 | | Если указан исполнитель в поле "Исполнитель", система отправляет уведомление выбранному пользователю о новой задаче |
| 7 | | Сохраняет задачу в базе данных |
| 8 | | Система переходит в основной экран планировщика задач |

### Расширение A: Пользователь прикрепляет файл к задаче перед сохранением

**Условие:** На шаге 2 основного потока, пользователь может нажать "Прикрепить файл"

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | Пользователь нажимает "Прикрепить файл" | Система выполняет Use Case: UC02 "Прикрепить файл" |
| A2 | | После выполнения UC02, система возвращается к экрану создания задачи. Если получен статус "Успешно", то файл отображается в списке вложений |
| A3 | Возврат к шагу 2 основного потока | |

### Расширение B: Пользователь делегирует задачу перед сохранением

**Условие:** На шаге 2 основного потока, пользователь может нажать "Делегировать"

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| B1 | Пользователь нажимает "Делегировать" | Система отображает экран выбора пользователя из списка |
| B2 | Выбирает исполнителя и подтверждает выбор | Система добавляет выбранного пользователя в поле "Исполнитель" |
| B3 | Возврат к шагу 2 основного потока | |

### Расширение C: Пользователь делает задачу повторяющейся перед сохранением

**Условие:** На шаге 2 основного потока, пользователь может нажать "Сделать повторяющейся"

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| C1 | Пользователь нажимает "Сделать повторяющейся" | Система отображает диалог выбора периода повторения |
| C2 | Пользователь выбирает период и нажимает "Готово" | Система сохраняет настройки повторения |
| C3 | Возврат к шагу 2 основного потока | |

### Расширение D: Ошибка валидации данных при сохранении

**Условие:** На шаге 3 основного потока, система обнаруживает ошибку (например, не заполнено обязательное поле "Название")

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| D1 | | Система отображает сообщение об ошибке рядом с соответствующим полем |
| D2 | Возврат к шагу 2 основного потока для исправления ошибки | |

---

## UC02: Прикрепить файл

**Акторы:** Пользователь  
**Триггер:** Вызывается из других use case (UC01 "Создание задачи", "Редактировать")  
**Предусловия:** Открыт экран, с которого возможна загрузка файла  
**Результат:** Файл прикреплен к задаче

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | Пользователь инициирует команду "Прикрепить файл" | Система отображает диалог выбора файла с устройства |
| 2 | Пользователь выбирает файл | |
| 3 | | Система проверяет файл (размер, тип) |
| 4 | | Система загружает файл на сервер |
| 5 | | Система возвращает статус "Успешно" и ссылку на загруженный файл |

### Расширение A: Выбран некорректный файл

**Условие:** На шаге 3, система обнаруживает, что файл не соответствует требованиям (неверный тип, слишком большой размер)

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | | Система показывает ошибку: "Некорректный файл" |
| A2 | | Возврат к шагу 1 основного потока UC02 (пользователь может попробовать выбрать другой файл или отменить процесс) |

### Расширение B: Ошибка сети или сервера при загрузке

**Условие:** На шаге 4, происходит сбой загрузки

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| B1 | | Система показывает ошибку: "Не удалось загрузить файл. Проверьте соединение и попробуйте еще раз" |
| B2 | | Возврат к шагу 1 основного потока UC02 (пользователь может попробовать выбрать другой файл или отменить процесс) |

---

## UC03: Редактирование задачи

**Акторы:** Пользователь (создатель задачи или исполнитель с правами)  
**Триггер:** Пользователь нажимает на задачу в списке и выбирает "Редактировать"  
**Предусловия:** Пользователь авторизован. Задача существует и доступна для редактирования  
**Результат:** Задача обновлена с новыми данными

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | | Система открывает экран редактирования задачи, предзаполненный текущими данными |
| 2 | Пользователь изменяет необходимые поля (название, описание, дату и т.д.) | |
| 3 | Пользователь нажимает "Сохранить" | |
| 4 | | Система валидирует введенные данные |
| 5 | | Система сохраняет обновленную задачу в базе данных |
| 6 | | Система возвращает пользователя на предыдущий экран, отображая обновленную задачу |

### Расширение A: Ошибка валидации данных

**Условие:** На шаге 3, система обнаруживает ошибку (например, не заполнено обязательное поле "Название")

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | | Система отображает сообщение об ошибке рядом с соответствующим полем |
| A2 | Возврат к шагу 2 основного потока для исправления ошибки | |

---

## UC04: Отметка задачи как выполненной

**Акторы:** Пользователь (исполнитель задачи или пользователь с правами)  
**Триггер:** Пользователь нажимает на чекбокс или кнопку "Выполнено" рядом с задачей  
**Предусловия:** Пользователь авторизован. Задача существует и имеет статус "Не выполнена"  
**Результат:** Статус задачи изменен на "Выполнена". Задача перемещается в соответствующий раздел

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | Пользователь нажимает на чекбокс/кнопку "Выполнено" | |
| 2 | | Система изменяет статус задачи на "Выполнена" |
| 3 | | Система сохраняет новый статус и дату выполнения в базе данных |
| 4 | | Система обновляет интерфейс, перемещая задачу в список "Выполненные" или скрывая ее |
| 5 | | Система может отправить уведомление создателю задачи о ее выполнении (опционально) |

### Расширение A: Пользователь отменяет выполнение

**Условие:** Пользователь нажимает на чекбокс уже выполненной задачи

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | Пользователь нажимает на чекбокс выполненной задачи | |
| A2 | | Система изменяет статус задачи обратно на "В работе" или "Не выполнена" |
| A3 | | Система сохраняет новый статус в базе данных |
| A4 | | Система возвращает задачу в основной список |

---

## UC05: Просмотр деталей задачи

**Акторы:** Пользователь  
**Триггер:** Пользователь нажимает на задачу в списке  
**Предусловия:** Пользователь авторизован. Задача существует  
**Результат:** Пользователь видит полную информацию о задаче

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | Пользователь нажимает на задачу в списке | |
| 2 | | Система открывает экран деталей задачи, отображая всю информацию: название, описание, дату создания, срок, исполнителя, статус, вложенные файлы, историю изменений |
| 3 | Пользователь просматривает информацию | |
| 4 | Пользователь нажимает "Назад" | Система возвращает пользователя к предыдущему экрану |

### Расширение A: Пользователь редактирует задачу из детального просмотра

**Условие:** На шаге 3, пользователь нажимает кнопку "Редактировать"

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | Пользователь нажимает "Редактировать" | Система выполняет Use Case: UC03 "Редактирование задачи" |

---

## UC06: Удаление задачи

**Акторы:** Пользователь (создатель задачи или администратор)  
**Триггер:** Пользователь нажимает на задаче кнопку "Удалить"  
**Предусловия:** Пользователь авторизован и имеет права на удаление. Задача существует  
**Результат:** Задача удалена из системы

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | Пользователь инициирует команду "Удалить" (через меню или кнопку) | |
| 2 | | Система запрашивает подтверждение удаления |
| 3 | Пользователь подтверждает удаление | |
| 4 | | Система удаляет задачу и все связанные с ней данные (файлы, комментарии) из базы данных |
| 5 | | Система обновляет интерфейс, убирая задачу из списка |

### Расширение A: Пользователь отменяет удаление

**Условие:** На шаге 3, пользователь отменяет действие

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | Пользователь нажимает "Отмена" | Система скрывает диалог подтверждения и возвращает пользователя к экрану с задачей |

---

## UC07: Добавление комментария к задаче

**Акторы:** Пользователь  
**Триггер:** Пользователь нажимает "Добавить комментарий" в деталях задачи  
**Предусловия:** Пользователь авторизован. Задача существует  
**Результат:** Новый комментарий добавлен к задаче и виден всем участникам

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | | Система отображает поле ввода комментария и кнопку "Отправить" |
| 2 | Пользователь вводит текст комментария | |
| 3 | Пользователь нажимает "Отправить" | |
| 4 | | Система сохраняет комментарий в базе данных, привязывая его к задаче, пользователю и текущей дате/времени |
| 5 | | Система отображает новый комментарий в ленте комментариев задачи |
| 6 | | Система отправляет уведомления об упомянутых пользователях (@username) и, опционально, другим участникам задачи |

### Расширение A: Пользователь прикрепляет файл к комментарию

**Условие:** На шаге 2, пользователь нажимает "Прикрепить файл"

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | Пользователь нажимает "Прикрепить файл" | Система выполняет Use Case: UC02 "Прикрепить файл" |
| A2 | | После успешной загрузки, система отображает превью файла в поле комментария |
| A3 | Возврат к шагу 2 основного потока | |

---

## UC08: Фильтрация и поиск задач

**Акторы:** Пользователь  
**Триггер:** Пользователь использует строку поиска или открывает меню фильтров  
**Предусловия:** Пользователь авторизован  
**Результат:** Отображен список задач, соответствующий критериям поиска и фильтрации

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | Пользователь вводит текст в строку поиска ИЛИ нажимает "Фильтры" | |
| 2 | | Система в реальном времени обновляет список задач по введенному тексту (по названию/описанию) ИЛИ отображает панель с параметрами фильтрации (по статусу, исполнителю, дате, тегам) |
| 3 | Пользователь выбирает/вводит параметры фильтрации | |
| 4 | Пользователь применяет фильтры (нажимает "Применить" или выбор происходит автоматически) | |
| 5 | | Система выполняет запрос к базе данных с учетом всех критериев |
| 6 | | Система отображает обновленный список задач, соответствующий условиям |

### Расширение A: Сброс фильтров

**Условие:** Пользователь нажимает "Сбросить фильтры"

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | Пользователь нажимает "Сбросить" | Система сбрасывает все параметры фильтрации к значениям по умолчанию |
| A2 | | Система отображает полный список задач |

---

## UC09: Изменение статуса задачи (по шагам workflow)

**Акторы:** Пользователь (исполнитель или пользователь с правами)  
**Триггер:** Пользователь изменяет статус задачи через выпадающий список в деталях задачи  
**Предусловия:** Пользователь авторизован. Задача существует  
**Результат:** Статус задачи изменен на новый

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | Пользователь открывает детали задачи (UC05) | |
| 2 | Пользователь нажимает на текущий статус (например, "В работе") | Система отображает выпадающий список с доступными статусами (например, "В работе", "На проверке", "Выполнено") |
| 3 | Пользователь выбирает новый статус из списка | |
| 4 | | Система валидирует возможность перехода на выбранный статус |
| 5 | | Система обновляет статус задачи в базе данных |
| 6 | | Система записывает изменение статуса в историю задачи |
| 7 | | Система отображает новый статус в интерфейсе |
| 8 | | Система может отправить уведомление создателю задачи или другому исполнителю о смене статуса |

### Расширение A: Недопустимый переход статуса

**Условие:** На шаге 4, система определяет, что переход на выбранный статус невозможен по workflow

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | | Система отображает сообщение: "Невозможно сменить статус на выбранный" |
| A2 | | Возврат к шагу 2 основного потока |

---

## UC10: Просмотр уведомлений

**Акторы:** Пользователь  
**Триггер:** Пользователь нажимает на иконку "Колокольчик" (уведомления)  
**Предусловия:** Пользователь авторизован  
**Результат:** Пользователь видит список своих уведомлений

### Основной поток

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| 1 | Пользователь нажимает на иконку уведомлений | |
| 2 | | Система отображает выпадающий список с последними уведомлениями (о новых задачах, изменениях, комментариях, приближающихся дедлайнах) |
| 3 | Пользователь просматривает список | |
| 4 | Пользователь нажимает на уведомление | Система помечает уведомление как прочитанное |
| 5 | | Система перенаправляет пользователя на экран, связанный с уведомлением (например, в детали задачи) |

### Расширение A: Пользователь очищает уведомления

**Условие:** Пользователь нажимает "Очистить все"

| Шаг | Действие актора | Действие системы |
|-----|------------------|------------------|
| A1 | Пользователь нажимает "Очистить все" | Система запрашивает подтверждение |
| A2 | Пользователь подтверждает очистку | Система помечает все уведомления пользователя как прочитанные и скрывает их из списка |
